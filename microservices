What is Microservice?
Microservice is developed based on business features and deployed independently by an automated deployment machinery.

There is less centralized management of Microservices that may be written in various programming languages and utilize diverse data storage technologies.

---------------------------------------------------------------------
Applications are broadly classified into two types:

i) Monolithic Architecture, where an application is built as a single unit.

ii) Microservices Architecture, where many applications (microservices) handle a small portion of the functionality and data.
---------------------------------------------------------------------

Monolithic Architechture

Benefits:

Faster Initial Development - With one application, it would be relatively easy to add additional features, especially when the application is relatively small.
Little User Confusion - Developers need not have to learn about different applications, but would be focused towards one application.
Improved Integration - Features could integrate with each other well and easily.

Disadvantages:

Single Point of Failure - If any single application function or component fails, then the entire application goes down. For example - a web application with separate functions handling tasks like payment, login, and history; a function begins to consume more memory or CPU. In this scenario, the entire application will come to a halt.

Horizontal Scaling - Scaling application can only be accomplished by deploying the same EAR/WAR packages in more servers. Every single copy of the application in different servers will use the same number of primary resources, which is usually not an effective way to design.

As application grows, the code base grows with it, which can overload IDE every time it loads the application. This definitely reduces developer productivity.
Substantially less iteration - a small change made to any part of the application, requires the entire monolith to be rebuilt and deployed.
Maintenance costs will shoot up exponentially with site size.
High set-up costs - In order to get each new volunteer up and running, the larger the application, the more difficult this would be.

---------------------------------------------------------------------

Microservice Style

Build applications as suites of services (Modular approach)

Each microservice exposes a common API accessed through the network (as opposed to inter-process communication or shared memory on the same machine).

API calls are stitched mostly on the server to produce a page, although few of this work is executed by the client querying individual microservices.

Big enterprise players such as Amazon, Netflix, Uber, Yelp and eBay have adopted Microservices. Services are

Independently deployable
Scalable
Each service offers a secure module boundary, allowing different services to be written in different programming languages.

Advantages:

Improved fault isolation: Larger applications can remain largely unaffected by the failure of a single module with microservice style adoption.
Removes Dependency: Eliminates long-term commitment to any single technology stack.
Easy Understanding: With the split of functionality, it gives more room for new developers to understand the functionality of a service and make enhancements easily.
Easy Deployment: Microservices-based applications are deployed inside containers providing better management.

Disadvantages:

Complexity - Deploying microservices can be a little complex, requiring coordination among multiple services, which may not be as straightforward as deploying a monolith.
Multiple DBs - Managing multiple databases and transaction management could be painful.
Testing - Testing could be little cumbersome, as each dependent service needs to be confirmed before one can start testing.
Coordination - Handling requests across multiple independent services requires proper workflow management. There can be a scenario where one of the services may not be responding or remote calls experiencing latency.

---------------------------------------------------------------------
The three golden rules of Microservices include:

Componentize
Collaborate
Connect

---------------------------------------------------------------------

Microservice vs SOA(Service Oriented Architechture)

Miscroservice is a subset of SOA. SOA is a term covering whole Enterprise architechture which may comprise of more than one applications

     Microservice                               Service Oriented Architechture
A single Distributed system                 Large Distributed system
Accelerated Realization of Benefits         Overall Business transformation
Specialization of SOA                       Large scope spanning multiple systems


---------------------------------------------------------------------

Microservice Bullet Points:

Small Focused
Loosely coupled
Language Neutral
Bounded Context

---------------------------------------------------------------------

How do clients of a service/router know about the available instances of a service? The solution is Service Registry.

Service Registry acts as a database of services, their instances, and corresponding locations.
Service instances are registered with the service registry on startup and deregistered on shutdown.
Clients of the service/router query the service registry to find the available instances of a service.
Some of the famous service registries include - Eureka, Apache Zookeeper, Consul, etc.

-----------------------------------------------------------------------
Service instances have dynamically assigned network locations. Service instances change dynamically due to Auto-scaling, Failures and Upgrades.

The client needs Service Discovery Mechanism to over come this. There are two types of Service Discovery:

Client-side discovery
Server-side discovery
-----------------------------------------------------------------------

The clients take the onus and are responsible for determining the network locations of available service instances by querying a service registry. This is a straight forward approach.

The clients use intelligent application-specific load-balancing decisions using hashing. But on the other hand, all service clients should have this client-side service discovery logic for each programming language and framework.

Netflix OSS is a good example for this.

-----------------------------------------------------------------------

The client makes a request via a load balancer. The load balancer queries the service registry and routes each request to an available service instance.

AWS Elastic Load Balancer (ELB) is an example of a server-side discovery router.

Main benefit

Details of discovery are abstracted from the client, thus eliminating the need to implement discovery logic for each programming language and framework.
-----------------------------------------------------------------------
It functions similar to the electrical circuit breaker.

When the number of consecutive request failures crosses a threshold,

The circuit breaker trips for limited timeout period and all attempts to invoke the remote service fail immediately.
After the expiry of the timeout, the circuit breaker allows a limited number of test requests to pass through.
If the requests are successful, the circuit breaker continues normal operation. If there is a failure, the timeout period starts again.

-----------------------------------------------------------------------

Queries in a microservice architecture are implemented through Command Query Responsibility Segregation (CQRS). In CQRS, the application is split into two components:

command-side takes care of creating, updating, and deleting requests and emits events when data changes.
query-side executes queries against one or more materialized views, which are kept updated by subscribing to the stream of events released when data changes.
Takeaways

CQRS supports event driven architecture.
Few complex domains may be simpler to tackle by utilizing CQRS.
While handling high-performance applications, CQRS allows separation of a load from reads and writes, allowing to scale independently.

-----------------------------------------------------------------------

EVENt Driven architechture

The Microservices trigger and update the business entities based on any event and publishes an event when some action occurs.

For example - A payment Microservice, publishes an event when something notable happens, such as when it updates a business entity. Other microservices inventory, subscribe to those events. When a microservice gets an event, it can update its business entities, which might result in more events being published.

-----------------------------------------------------------------------
